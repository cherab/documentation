

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Installation and Project Structure &mdash; CHERAB 1.01 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Available Packages" href="available_modules.html" />
    <link rel="prev" title="2. Licence" href="licence.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CHERAB
          

          
          </a>

          
            
            
              <div class="version">
                1.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">1. Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">2. Licence</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Installation and Project Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">3.1. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#project-structure">3.2. Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">3.3. Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-through-pip">3.3.1. Installing through Pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-from-source">3.3.2. Installing from source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-atomic-data">3.4. Configuring Atomic Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">3.5. Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="available_modules.html">4. Available Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomic/atomic_data.html">5. Atomic Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="plasmas/plasmas.html">6. Plasmas</a></li>
<li class="toctree-l1"><a class="reference internal" href="models/emission_models.html">7. Emission Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/math.html">8. Function Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools/tools.html">9. Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Demonstrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html">Atomic Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html#creating-plasmas">Creating Plasmas</a></li>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html#surface-radiation-loads">Surface Radiation Loads</a></li>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html#code-examples-gallery">Code examples gallery</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CHERAB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Installation and Project Structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation_and_structure.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-and-project-structure">
<h1>3. Installation and Project Structure<a class="headerlink" href="#installation-and-project-structure" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>3.1. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The CHERAB package requires Python 3.5+, numpy, scipy, matplotlib and <a class="reference external" href="https://www.raysect.org">Raysect</a>.
Scipy version 0.13 or higher is recommended. Currently support for Python 2 is not planned. IPython is
recommended for interactive use.</p>
</div>
<div class="section" id="project-structure">
<h2>3.2. Project Structure<a class="headerlink" href="#project-structure" title="Permalink to this headline">¶</a></h2>
<p>CHERAB is a large code framework consisting of a main core package and many smaller feature
packages. The overall structure of the framework is best visualised as onion shells. The full
project structure is most relevant for researchers in fusion plasma physics. Researchers in other
areas such as industrial plasmas and astrophysics will only require layers 1, 2 and 3a for their
applications.</p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/CHERAB_structure.png"><img alt="_images/CHERAB_structure.png" src="_images/CHERAB_structure.png" style="width: 650px;" /></a>
<p class="caption"><span class="caption-text"><strong>Caption:</strong> A high level diagram illustrating the structure of the CHERAB framework.</span></p>
</div>
<p><strong>1. Ray-tracing Engine:</strong> CHERAB was built on top of a ray-tracing engine to provide all the core
ray-tracing functionality, mesh handling, etc. <a class="reference external" href="https://www.raysect.org">Raysect</a> is currently
the only ray-tracing engine supported, but the framework has been designed such that this
component is interchangeable. Support for other ray-tracers may be added in the future.</p>
<p><strong>2. Core API Module:</strong> The <a class="reference external" href="https://pypi.org/project/cherab">cherab-core</a> package defines
all the API interfaces for the whole framework. It defines all the core functionality such
as: how plasmas are defined and the properties that can be computed from them; the types of
atomic data that can be used in spectroscopic calculations; and the types of plasma emission
that CHERAB can calculate. This package is strictly managed by the CHERAB development team.</p>
<p><strong>3a. Atomic Data Providers:</strong> Almost all of the plasma emission models implemented in CHERAB
require some type of atomic data for their calculations. The base types of reaction rates and
photon emissivity coefficients are defined in the Core API Module,
<a class="reference external" href="https://pypi.org/project/cherab">cherab-core</a>. A default atomic data source module has been
written based on the <a class="reference external" href="http://open.adas.ac.uk/">OpenADAS project</a>, available as the
<a class="reference external" href="https://github.com/cherab/openadas">cherab-openadas</a> package. In future other atomic data
sources, such as the ALADDIN database for example, could be made available through additional
packages.</p>
<p><strong>3b. Machine Specific Packages:</strong> These components are for functionality associated with
a specific fusion experiment. For example, each experiment tends to have its own systems
for loading and saving experiment/simulation data. These packages allow the local facility
experts to provide models and diagnostic settings that are unique to their experiments.</p>
<p><strong>4. User Packages:</strong> This is the layer where most CHERAB users will do their work.
Code in this layer will usually take the form of scripts configured for a particular
analysis pipeline such as performing a synthetic diagnostic simulation or fitting some
measured data. These projects may just be collections of scripts owned by diagnostic
responsible officers or they could be organised into formal packages.</p>
</div>
<div class="section" id="installation">
<h2>3.3. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Users will generally just install the core package and the specific feature packages they
need for their work. For example, users working on the JET tokamak will require the
<a class="reference external" href="https://pypi.org/project/cherab">cherab-core</a> package, the
<a class="reference external" href="https://github.com/cherab/jet">cherab-jet</a> package and an atomic data source such as
<a class="reference external" href="https://github.com/cherab/openadas">cherab-openadas</a>. The main <code class="docutils literal notranslate"><span class="pre">cherab-core</span></code> and
<code class="docutils literal notranslate"><span class="pre">cherab-openadas</span></code> packages for spectroscopic plasma simulations are available through pip.
The additional fusion specific packages offering extra functionality should be cloned from
their respective repositories.</p>
<div class="section" id="installing-through-pip">
<h3>3.3.1. Installing through Pip<a class="headerlink" href="#installing-through-pip" title="Permalink to this headline">¶</a></h3>
<p>CHERAB is available from the python package repository <a class="reference external" href="https://pypi.org/project/cherab">pypi</a>.
Unless developing new code for a cherab package, most users should use the latest versioned release
packages available through pypi.</p>
<p>The easiest way to install CHERAB with OpenADAS is using <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cherab</span><span class="p">,</span> <span class="n">cherab</span><span class="o">-</span><span class="n">openadas</span>
</pre></div>
</div>
<p>This will compile the CHERAB cython extensions and install both packages. If you don’t have
administrator access to install the packages, add the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag to the above line
to install the packages under your own user account.</p>
</div>
<div class="section" id="installing-from-source">
<h3>3.3.2. Installing from source<a class="headerlink" href="#installing-from-source" title="Permalink to this headline">¶</a></h3>
<p>If pip is not available the source files can be downloaded from <a class="reference external" href="https://pypi.org/project/cherab">pypi</a>
or from our <a class="reference external" href="https://github.com/cherab/core">development repository</a>. Once you have the source files,
locate the folder containing setup.py and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>If all the required dependencies are present (cython, numpy, scipy, matplotlib and raysect), this should
start the CHERAB compilation and installation process. If you don’t have administrator access to install
the package, add the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag to the above line to install the package under your own user account.</p>
<p>When developing cherab it is usually preferred that the packages be installed in “develop” mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">develop</span>
</pre></div>
</div>
<p>This will cause the original installation folder to be added to the site-package path. Modifications to
the code will therefore be visible to python next time the code is imported. The <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag should be
used if you do not have administrative permission for your python installation.</p>
<p>As all the CHERAB packages are dependent on the <code class="docutils literal notranslate"><span class="pre">cherab-core</span></code> package, this package must be installed first.
Note that other packages may have their own inter-dependencies, see the specific package documentation for
more information.</p>
<p>When developing new features for cherab, the development branch should be used as the base.</p>
</div>
</div>
<div class="section" id="configuring-atomic-data">
<h2>3.4. Configuring Atomic Data<a class="headerlink" href="#configuring-atomic-data" title="Permalink to this headline">¶</a></h2>
<p>Regardless of the method you used to install CHERAB, you will need a valid atomic data source for your
calculations. CHERAB provides a default atomic data source through the OpenADAS module. If you wish
to use this data source, the appropriate data needs to be downloaded from the OpenADAS web archive
and stored in a suitable local repository. This procedure can be performed with the following python
commands once your <code class="docutils literal notranslate"><span class="pre">cherab-core</span></code> and <code class="docutils literal notranslate"><span class="pre">cherab-openadas</span></code> packages have been successfully installed.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cherab.openadas.repository</span> <span class="kn">import</span> <span class="n">populate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">populate</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="testing">
<h2>3.5. Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>A selection of test scripts can be run with the <cite>nose</cite> testing framework. These are routinely
run on the development version.  Running <code class="docutils literal notranslate"><span class="pre">nosetests</span></code> at the terminal in the source directory
should run all of these tests to completion without errors or failures.</p>
<p>Many of the demos used throughout the Raysect documentation are distributed with the source code in
the <code class="docutils literal notranslate"><span class="pre">demo</span></code> folder.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="available_modules.html" class="btn btn-neutral float-right" title="4. Available Packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="licence.html" class="btn btn-neutral" title="2. Licence" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, CHERAB Team.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.01',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>